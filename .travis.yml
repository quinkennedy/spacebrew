language: cpp
env:
  - NODE_VERSION="node"
  - NODE_VERSION="4.3"
  - NODE_VERSION="0.12"
os:
  - linux
  - osx
before_install:
  - git clone https://github.com/creationix/nvm.git /tmp/.nvm;
    source /tmp/.nvm/nvm.sh;
    nvm install $NODE_VERSION;
    nvm use --delete-prefix $NODE_VERSION;
install:
  - npm install;
    npm install codecov;
    npm install codacy-coverage;
    npm install codeclimate-test-reporter;
    npm install coveralls;
script:
  - npm run coverage
after_success:
  - if [ "$TRAVIS_OS_NAME" == "linux" ] && [ "$NODE_VERSION" == "node" ]; then
    ./node_modules/.bin/codecov;
    cat ./coverage/lcov.info | ./node_modules/.bin/codacy-coverage;
    cat ./coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js;
    node_modules/.bin/codeclimate-test-reporter < ./coverage/lcov.info;
    fi;
